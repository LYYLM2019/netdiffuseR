<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Creates a <code>diffnet</code> class object — diffnet-class • netdiffuseR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Creates a <code>diffnet</code> class object — diffnet-class" />
<meta property="og:description" content="diffnet objects contain difussion networks. With adjacency
matrices and time of adoption (toa) vector as its main components, most of the
package's functions have methods for this class of objects." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40608305-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-40608305-5');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">netdiffuseR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.21.999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/analyzing-medical-innovation-data.html">netdiffuseR showcase: Medical Innovations</a>
    </li>
    <li>
      <a href="../articles/introduction-to-netdiffuser.html">Simulating diffusion networks: Using the `rdiffnet` function</a>
    </li>
    <li>
      <a href="../articles/not-lost-in-translation-importing-and-exporting-graphs.html">Not-Lost in translation: Getting diffusion data into netdiffuseR</a>
    </li>
    <li>
      <a href="../articles/time_discount_suscep_infect.html">Time Discounted Infection and Susceptibility</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USCCANA/netdiffuseR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates a <code>diffnet</code> class object</h1>
    <small class="dont-index">Source: <a href='https://github.com/USCCANA/netdiffuseR/blob/master/R/diffnet-class.r'><code>R/diffnet-class.r</code></a>, <a href='https://github.com/USCCANA/netdiffuseR/blob/master/R/diffnet-methods.r'><code>R/diffnet-methods.r</code></a></small>
    <div class="hidden name"><code>diffnet-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>diffnet</code> objects contain difussion networks. With adjacency
matrices and time of adoption (toa) vector as its main components, most of the
package's functions have methods for this class of objects.</p>
    </div>

    <pre class="usage"><span class='fu'>as_diffnet</span>(<span class='no'>graph</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>as_diffnet</span>(<span class='no'>graph</span>, <span class='no'>...</span>)

<span class='co'># S3 method for networkDynamic</span>
<span class='fu'>as_diffnet</span>(<span class='no'>graph</span>, <span class='no'>toavar</span>, <span class='no'>...</span>)

<span class='fu'>new_diffnet</span>(
  <span class='no'>graph</span>,
  <span class='no'>toa</span>,
  <span class='kw'>t0</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='no'>toa</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>),
  <span class='kw'>t1</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>toa</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>),
  <span class='kw'>vertex.dyn.attrs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>vertex.static.attrs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>id.and.per.vars</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>graph.attrs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>undirected</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"diffnet.undirected"</span>),
  <span class='kw'>self</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"diffnet.self"</span>),
  <span class='kw'>multiple</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"diffnet.multiple"</span>),
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"Diffusion Network"</span>,
  <span class='kw'>behavior</span> <span class='kw'>=</span> <span class='st'>"Unspecified"</span>
)

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span>(
  <span class='no'>x</span>,
  <span class='kw'>row.names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>optional</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>attr.class</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"dyn"</span>, <span class='st'>"static"</span>),
  <span class='no'>...</span>
)

<span class='fu'>diffnet.attrs</span>(
  <span class='no'>graph</span>,
  <span class='kw'>element</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"vertex"</span>, <span class='st'>"graph"</span>),
  <span class='kw'>attr.class</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"dyn"</span>, <span class='st'>"static"</span>),
  <span class='kw'>as.df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>diffnet.attrs</span>(<span class='no'>graph</span>, <span class='kw'>element</span> <span class='kw'>=</span> <span class='st'>"vertex"</span>, <span class='kw'>attr.class</span> <span class='kw'>=</span> <span class='st'>"static"</span>) <span class='kw'>&lt;-</span> <span class='no'>value</span>

<span class='fu'>diffnet.toa</span>(<span class='no'>graph</span>)

<span class='fu'>diffnet.toa</span>(<span class='no'>graph</span>, <span class='no'>i</span>) <span class='kw'>&lt;-</span> <span class='no'>value</span>

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>nodes</span>(<span class='no'>graph</span>)

<span class='fu'>diffnetLapply</span>(<span class='no'>graph</span>, <span class='no'>FUN</span>, <span class='no'>...</span>)

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>object</span>, <span class='no'>...</span>)

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/base/dimnames.html'>dimnames</a></span>(<span class='no'>x</span>)

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span>(<span class='no'>x</span>)

<span class='co'># S3 method for diffnet</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>x</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>graph</th>
      <td><p>A dynamic graph (see <code><a href='netdiffuseR-graphs.html'>netdiffuseR-graphs</a></code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to the jmethod.</p></td>
    </tr>
    <tr>
      <th>toavar</th>
      <td><p>Character scalar. Name of the variable that holds the time of adoption.</p></td>
    </tr>
    <tr>
      <th>toa</th>
      <td><p>Numeric vector of size \(n\). Times of adoption.</p></td>
    </tr>
    <tr>
      <th>t0</th>
      <td><p>Integer scalar. Passed to <code><a href='toa_mat.html'>toa_mat</a></code>.</p></td>
    </tr>
    <tr>
      <th>t1</th>
      <td><p>Integer scalar. Passed to <code><a href='toa_mat.html'>toa_mat</a></code>.</p></td>
    </tr>
    <tr>
      <th>vertex.dyn.attrs</th>
      <td><p>Vertices dynamic attributes (see details).</p></td>
    </tr>
    <tr>
      <th>vertex.static.attrs</th>
      <td><p>Vertices static attributes (see details).</p></td>
    </tr>
    <tr>
      <th>id.and.per.vars</th>
      <td><p>A character vector of length 2. Optionally specified to check the
order of the rows in the attribute data.</p></td>
    </tr>
    <tr>
      <th>graph.attrs</th>
      <td><p>Graph dynamic attributes (not supported yet).</p></td>
    </tr>
    <tr>
      <th>undirected</th>
      <td><p>Logical scalar. When <code>TRUE</code> only the lower triangle of the adjacency matrix will considered (faster).</p></td>
    </tr>
    <tr>
      <th>self</th>
      <td><p>Logical scalar. When <code>TRUE</code> autolinks (loops, self edges) are allowed (see details).</p></td>
    </tr>
    <tr>
      <th>multiple</th>
      <td><p>Logical scalar. When <code>TRUE</code> allows multiple edges.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>Character scalar. Name of the diffusion network (descriptive).</p></td>
    </tr>
    <tr>
      <th>behavior</th>
      <td><p>Character scalar. Name of the behavior been analyzed (innovation).</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A <code>diffnet</code> object.</p></td>
    </tr>
    <tr>
      <th>row.names</th>
      <td><p>Ignored.</p></td>
    </tr>
    <tr>
      <th>optional</th>
      <td><p>Ignored.</p></td>
    </tr>
    <tr>
      <th>attr.class</th>
      <td><p>Character vector/scalar. Indicates the class of the attribute, either dynamic (<code>"dyn"</code>),
or static (<code>"static"</code>).</p></td>
    </tr>
    <tr>
      <th>element</th>
      <td><p>Character vector/scalar. Indicates what to retrieve/alter.</p></td>
    </tr>
    <tr>
      <th>as.df</th>
      <td><p>Logical scalar. When TRUE returns a data.frame.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>In the case of <code>diffnet.toa</code>, replacement, otherwise see below.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>Indices specifying elements to replace. See <code><a href='https://rdrr.io/r/base/Extract.html'>Extract</a></code>.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>a function to be passed to lapply</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>A <code>diffnet</code> object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of class <code>diffnet</code> with the following elements:</p>
<dt>graph</dt><dd><p>A list of length \(T\). Containing sparse square matrices of size \(n\)
and class <code><a href='https://rdrr.io/pkg/Matrix/man/dgCMatrix-class.html'>dgCMatrix</a></code>.</p></dd>
<dt>toa</dt><dd><p>An integer vector of size \(T\) with times of adoption.</p></dd>
<dt>adopt, cumadopt</dt><dd><p>Numeric matrices of size \(n\times T\) as those returned
by <code><a href='toa_mat.html'>toa_mat</a></code>.</p></dd>
<dt>vertex.static.attrs</dt><dd><p>If not NULL, a data frame with \(n\) rows with vertex static
attributes.</p></dd>
<dt>vertex.dyn.attrs</dt><dd><p>A list of length \(T\) with data frames containing vertex attributes
throught time (dynamic).</p></dd>
<dt>graph.attrs</dt><dd><p>A data frame with \(T\) rows.</p></dd>
<dt>meta</dt><dd><p>A list of length 9 with the following elements:
<ul>
<li><p><code>type</code>: Character scalar equal to <code>"dynamic"</code>.</p></li>
<li><p><code>class</code>: Character scalar equal to <code>"list"</code>.</p></li>
<li><p><code>ids</code>: Character vector of size \(n\) with vertices' labels.</p></li>
<li><p><code>pers</code>: Integer vector of size \(T\).</p></li>
<li><p><code>nper</code>: Integer scalar equal to \(T\).</p></li>
<li><p><code>n</code>: Integer scalar equal to \(n\).</p></li>
<li><p><code>self</code>: Logical scalar.</p></li>
<li><p><code>undirected</code>: Logical scalar.</p></li>
<li><p><code>multiple</code>: Logical scalar.</p></li>
<li><p><code>name</code>: Character scalar.</p></li>
<li><p><code>behavior</code>: Character scalar.</p></li>
</ul></p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>diffnet</code> objects hold both, static and dynamic vertex attributes. When
creating <code>diffnet</code> objects, these can be specified using the arguments
<code>vertex.static.attrs</code> and <code>vertex.dyn.attrs</code>; depending on whether
the attributes to specify are static or dynamic, <span class="pkg">netdiffuseR</span> currently
supports the following objects:</p>
<table class='table'>
<tr><td><strong>Class</strong></td><td><strong>Dimension</strong></td><td><strong>Check sorting</strong></td></tr>
<tr><td><em>Static attributes</em></td><td><code>matrix</code></td><td>with \(n\) rows</td></tr>
<tr><td><code>id</code></td><td><code>data.frame</code></td><td>with \(n\) rows</td></tr>
<tr><td><code>id</code></td><td><code>vector</code></td><td>of length \(n\)</td></tr>
<tr><td>-</td><td></td><td><em>Dynamic attributes</em></td></tr>
<tr><td><code>matrix</code></td><td>with \(n\times T\) rows</td><td><code>id</code>, <code>per</code></td></tr>
<tr><td><code>data.frame</code></td><td>with \(n\times T\) rows</td><td><code>id</code>, <code>per</code></td></tr>
<tr><td><code>vector</code></td><td>of length \(n\times T\)</td><td>-</td></tr>
<tr><td><code>list</code></td><td>of length \(T\) with matrices or data.frames of \(n\) rows</td><td><code>id</code>, <code>per</code></td></tr>
</table>


<p>The last column, <strong>Check sorting</strong>, lists the variables that
the user should specify if he wants the function to check the order of the rows
of the attributes (notice that this is not possible for the case of vectors).
By providing the name of the vertex id variable, <code>id</code>, and the time period
id variable, <code>per</code>, the function makes sure that the attribute data is
presented in the right order. See the example below. If the user does not
provide the names of the vertex id and time period variables then the function
does not check the way the rows are sorted, further it assumes that the data
is in the correct order.</p>
    <h2 class="hasAnchor" id="auxiliary-functions"><a class="anchor" href="#auxiliary-functions"></a>Auxiliary functions</h2>

    


<p><code>diffnet.attrs</code> Allows retriving network attributes. In particular, by default
returns a list of length \(T\) with data frames with the following columns:</p>
<ol>
<li><p><code>per</code> Indicating the time period to which the observation corresponds.</p></li>
<li><p><code>toa</code> Indicating the time of adoption of the vertex.</p></li>
<li><p>Further columns depending on the vertex and graph attributes.</p></li>
</ol>

<p>Each vertex static attributes' are repeated \(T\) times in total so that these
can be binded (<code>rbind</code>) to dynamic attributes.</p>
<p>When <code>as.df=TRUE</code>, this convenience function is useful as it can be used
to create event history (panel data) datasets used for model fitting.</p>
<p>Conversely, the replacement method allows including new vertex or graph
attributes either dynamic or static (see examples below).</p>
<p><code>diffnet.toa(graph)</code> works as an alias of <code>graph$toa</code>.
The replacement method, <code>diffnet.toa&lt;-</code> used as <code>diffnet.toa(graph)&lt;-...</code>,
is the right way of modifying times of adoption as when doing so it
 performs several checks on the time ranges, and
recalculates adoption and cumulative adoption matrices using <code>toa_mat</code>.</p>
<p><code>nodes(graph)</code> is an alias for <code>graph$meta$ids</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Default options are listed at <code><a href='netdiffuseR-options.html'>netdiffuseR-options</a></code></p>
<p>Other diffnet methods: 
<code><a href='diffnetmatmult.html'>%*%</a>()</code>,
<code><a href='as.array.diffnet.html'>as.array.diffnet</a>()</code>,
<code><a href='c.diffnet.html'>c.diffnet</a>()</code>,
<code><a href='diffnet-arithmetic.html'>diffnet-arithmetic</a></code>,
<code><a href='diffnet_index.html'>diffnet_index</a></code>,
<code><a href='plot.diffnet.html'>plot.diffnet</a>()</code>,
<code><a href='summary.diffnet.html'>summary.diffnet</a>()</code></p>
<p>Other data management functions: 
<code><a href='edgelist_to_adjmat.html'>edgelist_to_adjmat</a>()</code>,
<code><a href='egonet_attrs.html'>egonet_attrs</a>()</code>,
<code><a href='isolated.html'>isolated</a>()</code>,
<code><a href='survey_to_diffnet.html'>survey_to_diffnet</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Creating a random graph</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>123</span>)
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rgraph_ba.html'>rgraph_ba</a></span>(<span class='kw'>t</span><span class='kw'>=</span><span class='fl'>9</span>)
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>graph</span>)

<span class='co'># Pretty TOA</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>graph</span>) <span class='kw'>&lt;-</span> <span class='fl'>2001L</span>:<span class='fl'>2005L</span>
<span class='no'>toa</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2001L</span>:<span class='fl'>2005L</span>,<span class='fl'>NA</span>), <span class='fl'>10</span>, <span class='fl'>TRUE</span>)

<span class='co'># Creating diffnet object</span>
<span class='no'>diffnet</span> <span class='kw'>&lt;-</span> <span class='fu'>new_diffnet</span>(<span class='no'>graph</span>, <span class='no'>toa</span>)
<span class='no'>diffnet</span></div><div class='output co'>#&gt; Dynamic network of class -diffnet-
#&gt;  Name               : Diffusion Network
#&gt;  Behavior           : Unspecified
#&gt;  # of nodes         : 10 (1, 2, 3, 4, 5, 6, 7, 8, ...)
#&gt;  # of time periods  : 5 (2001 - 2005)
#&gt;  Type               : directed
#&gt;  Final prevalence   : 0.80
#&gt;  Static attributes  : -
#&gt;  Dynamic attributes : -</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>diffnet</span>)</div><div class='output co'>#&gt; Diffusion network summary statistics
#&gt; Name     : Diffusion Network
#&gt; Behavior : Unspecified
#&gt; -----------------------------------------------------------------------------
#&gt;  Period   Adopters   Cum Adopt. (%)   Hazard Rate   Density   Moran's I (sd)  
#&gt; -------- ---------- ---------------- ------------- --------- ---------------- 
#&gt;     2001          1         1 (0.10)             -      0.11 -0.03 (0.15)     
#&gt;     2002          1         2 (0.20)          0.11      0.11  0.09 (0.20)     
#&gt;     2003          3         5 (0.50)          0.37      0.11  0.00 (0.22)     
#&gt;     2004          1         6 (0.60)          0.20      0.11 -0.32 (0.22)     
#&gt;     2005          2         8 (0.80)          0.50      0.11 -0.39 (0.20)     
#&gt; -----------------------------------------------------------------------------
#&gt;  Left censoring  : 0.10 (1)
#&gt;  Right centoring : 0.20 (2)
#&gt;  # of nodes      : 10
#&gt; 
#&gt;  Moran's I was computed on contemporaneous autocorrelation using 1/geodesic
#&gt;  values. Significane levels  *** &lt;= .01, ** &lt;= .05, * &lt;= .1.</div><div class='input'>
<span class='co'># Plotting slice 4</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>diffnet</span>, <span class='kw'>t</span><span class='kw'>=</span><span class='fl'>4</span>)</div><div class='img'><img src='diffnet-class-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># ATTRIBUTES ----------------------------------------------------------------</span>

<span class='co'># Retrieving attributes</span>
<span class='fu'>diffnet.attrs</span>(<span class='no'>diffnet</span>, <span class='st'>"vertex"</span>, <span class='st'>"static"</span>)</div><div class='output co'>#&gt; $`2001`
#&gt;     per  toa
#&gt; 1  2001 2005
#&gt; 2  2001 2004
#&gt; 3  2001   NA
#&gt; 4  2001   NA
#&gt; 5  2001 2001
#&gt; 6  2001 2002
#&gt; 7  2001 2003
#&gt; 8  2001 2005
#&gt; 9  2001 2003
#&gt; 10 2001 2003
#&gt; 
#&gt; $`2002`
#&gt;     per  toa
#&gt; 1  2002 2005
#&gt; 2  2002 2004
#&gt; 3  2002   NA
#&gt; 4  2002   NA
#&gt; 5  2002 2001
#&gt; 6  2002 2002
#&gt; 7  2002 2003
#&gt; 8  2002 2005
#&gt; 9  2002 2003
#&gt; 10 2002 2003
#&gt; 
#&gt; $`2003`
#&gt;     per  toa
#&gt; 1  2003 2005
#&gt; 2  2003 2004
#&gt; 3  2003   NA
#&gt; 4  2003   NA
#&gt; 5  2003 2001
#&gt; 6  2003 2002
#&gt; 7  2003 2003
#&gt; 8  2003 2005
#&gt; 9  2003 2003
#&gt; 10 2003 2003
#&gt; 
#&gt; $`2004`
#&gt;     per  toa
#&gt; 1  2004 2005
#&gt; 2  2004 2004
#&gt; 3  2004   NA
#&gt; 4  2004   NA
#&gt; 5  2004 2001
#&gt; 6  2004 2002
#&gt; 7  2004 2003
#&gt; 8  2004 2005
#&gt; 9  2004 2003
#&gt; 10 2004 2003
#&gt; 
#&gt; $`2005`
#&gt;     per  toa
#&gt; 1  2005 2005
#&gt; 2  2005 2004
#&gt; 3  2005   NA
#&gt; 4  2005   NA
#&gt; 5  2005 2001
#&gt; 6  2005 2002
#&gt; 7  2005 2003
#&gt; 8  2005 2005
#&gt; 9  2005 2003
#&gt; 10 2005 2003
#&gt; </div><div class='input'>
<span class='co'># Now as a data.frame (only static)</span>
<span class='fu'>diffnet.attrs</span>(<span class='no'>diffnet</span>, <span class='st'>"vertex"</span>, <span class='st'>"static"</span>, <span class='kw'>as.df</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     per  toa id
#&gt; 1  2001 2005  1
#&gt; 2  2001 2004  2
#&gt; 3  2001   NA  3
#&gt; 4  2001   NA  4
#&gt; 5  2001 2001  5
#&gt; 6  2001 2002  6
#&gt; 7  2001 2003  7
#&gt; 8  2001 2005  8
#&gt; 9  2001 2003  9
#&gt; 10 2001 2003 10
#&gt; 11 2002 2005  1
#&gt; 12 2002 2004  2
#&gt; 13 2002   NA  3
#&gt; 14 2002   NA  4
#&gt; 15 2002 2001  5
#&gt; 16 2002 2002  6
#&gt; 17 2002 2003  7
#&gt; 18 2002 2005  8
#&gt; 19 2002 2003  9
#&gt; 20 2002 2003 10
#&gt; 21 2003 2005  1
#&gt; 22 2003 2004  2
#&gt; 23 2003   NA  3
#&gt; 24 2003   NA  4
#&gt; 25 2003 2001  5
#&gt; 26 2003 2002  6
#&gt; 27 2003 2003  7
#&gt; 28 2003 2005  8
#&gt; 29 2003 2003  9
#&gt; 30 2003 2003 10
#&gt; 31 2004 2005  1
#&gt; 32 2004 2004  2
#&gt; 33 2004   NA  3
#&gt; 34 2004   NA  4
#&gt; 35 2004 2001  5
#&gt; 36 2004 2002  6
#&gt; 37 2004 2003  7
#&gt; 38 2004 2005  8
#&gt; 39 2004 2003  9
#&gt; 40 2004 2003 10
#&gt; 41 2005 2005  1
#&gt; 42 2005 2004  2
#&gt; 43 2005   NA  3
#&gt; 44 2005   NA  4
#&gt; 45 2005 2001  5
#&gt; 46 2005 2002  6
#&gt; 47 2005 2003  7
#&gt; 48 2005 2005  8
#&gt; 49 2005 2003  9
#&gt; 50 2005 2003 10</div><div class='input'>
<span class='co'># Now as a data.frame (all of them)</span>
<span class='fu'>diffnet.attrs</span>(<span class='no'>diffnet</span>, <span class='kw'>as.df</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;     per  toa id
#&gt; 1  2001 2005  1
#&gt; 2  2001 2004  2
#&gt; 3  2001   NA  3
#&gt; 4  2001   NA  4
#&gt; 5  2001 2001  5
#&gt; 6  2001 2002  6
#&gt; 7  2001 2003  7
#&gt; 8  2001 2005  8
#&gt; 9  2001 2003  9
#&gt; 10 2001 2003 10
#&gt; 11 2002 2005  1
#&gt; 12 2002 2004  2
#&gt; 13 2002   NA  3
#&gt; 14 2002   NA  4
#&gt; 15 2002 2001  5
#&gt; 16 2002 2002  6
#&gt; 17 2002 2003  7
#&gt; 18 2002 2005  8
#&gt; 19 2002 2003  9
#&gt; 20 2002 2003 10
#&gt; 21 2003 2005  1
#&gt; 22 2003 2004  2
#&gt; 23 2003   NA  3
#&gt; 24 2003   NA  4
#&gt; 25 2003 2001  5
#&gt; 26 2003 2002  6
#&gt; 27 2003 2003  7
#&gt; 28 2003 2005  8
#&gt; 29 2003 2003  9
#&gt; 30 2003 2003 10
#&gt; 31 2004 2005  1
#&gt; 32 2004 2004  2
#&gt; 33 2004   NA  3
#&gt; 34 2004   NA  4
#&gt; 35 2004 2001  5
#&gt; 36 2004 2002  6
#&gt; 37 2004 2003  7
#&gt; 38 2004 2005  8
#&gt; 39 2004 2003  9
#&gt; 40 2004 2003 10
#&gt; 41 2005 2005  1
#&gt; 42 2005 2004  2
#&gt; 43 2005   NA  3
#&gt; 44 2005   NA  4
#&gt; 45 2005 2001  5
#&gt; 46 2005 2002  6
#&gt; 47 2005 2003  7
#&gt; 48 2005 2005  8
#&gt; 49 2005 2003  9
#&gt; 50 2005 2003 10</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span>(<span class='no'>diffnet</span>) <span class='co'># This is a wrapper</span></div><div class='output co'>#&gt;     per  toa id
#&gt; 1  2001 2005  1
#&gt; 2  2001 2004  2
#&gt; 3  2001   NA  3
#&gt; 4  2001   NA  4
#&gt; 5  2001 2001  5
#&gt; 6  2001 2002  6
#&gt; 7  2001 2003  7
#&gt; 8  2001 2005  8
#&gt; 9  2001 2003  9
#&gt; 10 2001 2003 10
#&gt; 11 2002 2005  1
#&gt; 12 2002 2004  2
#&gt; 13 2002   NA  3
#&gt; 14 2002   NA  4
#&gt; 15 2002 2001  5
#&gt; 16 2002 2002  6
#&gt; 17 2002 2003  7
#&gt; 18 2002 2005  8
#&gt; 19 2002 2003  9
#&gt; 20 2002 2003 10
#&gt; 21 2003 2005  1
#&gt; 22 2003 2004  2
#&gt; 23 2003   NA  3
#&gt; 24 2003   NA  4
#&gt; 25 2003 2001  5
#&gt; 26 2003 2002  6
#&gt; 27 2003 2003  7
#&gt; 28 2003 2005  8
#&gt; 29 2003 2003  9
#&gt; 30 2003 2003 10
#&gt; 31 2004 2005  1
#&gt; 32 2004 2004  2
#&gt; 33 2004   NA  3
#&gt; 34 2004   NA  4
#&gt; 35 2004 2001  5
#&gt; 36 2004 2002  6
#&gt; 37 2004 2003  7
#&gt; 38 2004 2005  8
#&gt; 39 2004 2003  9
#&gt; 40 2004 2003 10
#&gt; 41 2005 2005  1
#&gt; 42 2005 2004  2
#&gt; 43 2005   NA  3
#&gt; 44 2005   NA  4
#&gt; 45 2005 2001  5
#&gt; 46 2005 2002  6
#&gt; 47 2005 2003  7
#&gt; 48 2005 2005  8
#&gt; 49 2005 2003  9
#&gt; 50 2005 2003 10</div><div class='input'>
<span class='co'># Unsorted data -------------------------------------------------------------</span>
<span class='co'># Loading example data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>fakesurveyDyn</span>)

<span class='co'># Creating a diffnet object</span>
<span class='no'>fs_diffnet</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='survey_to_diffnet.html'>survey_to_diffnet</a></span>(
   <span class='no'>fakesurveyDyn</span>, <span class='st'>"id"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"net1"</span>, <span class='st'>"net2"</span>, <span class='st'>"net3"</span>), <span class='st'>"toa"</span>, <span class='st'>"group"</span>,
   <span class='kw'>timevar</span> <span class='kw'>=</span> <span class='st'>"time"</span>, <span class='kw'>keep.isolates</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>warn.coercion</span><span class='kw'>=</span><span class='fl'>FALSE</span>)

<span class='co'># Now, we extract the graph data and create a diffnet object from scratch</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='no'>fs_diffnet</span>$<span class='no'>graph</span>
<span class='no'>ids</span> <span class='kw'>&lt;-</span> <span class='no'>fs_diffnet</span>$<span class='no'>meta</span>$<span class='no'>ids</span>
<span class='no'>graph</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/funprog.html'>Map</a></span>(<span class='kw'>function</span>(<span class='no'>g</span>) {
  <span class='fu'><a href='https://rdrr.io/r/base/dimnames.html'>dimnames</a></span>(<span class='no'>g</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='no'>ids</span>,<span class='no'>ids</span>)
  <span class='no'>g</span>
  }, <span class='kw'>g</span><span class='kw'>=</span><span class='no'>graph</span>)
<span class='no'>attrs</span> <span class='kw'>&lt;-</span> <span class='fu'>diffnet.attrs</span>(<span class='no'>fs_diffnet</span>, <span class='kw'>as.df</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>toa</span>   <span class='kw'>&lt;-</span> <span class='fu'>diffnet.toa</span>(<span class='no'>fs_diffnet</span>)

<span class='co'># Lets apply a different sorting to the data to see if it works</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>attrs</span>)
<span class='no'>attrs</span> <span class='kw'>&lt;-</span> <span class='no'>attrs</span>[<span class='fu'><a href='https://rdrr.io/r/base/order.html'>order</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='no'>n</span>)),]

<span class='co'># Now, recreating the old diffnet object (notice -id.and.per.vars- arg)</span>
<span class='no'>fs_diffnet_new</span> <span class='kw'>&lt;-</span> <span class='fu'>new_diffnet</span>(<span class='no'>graph</span>, <span class='kw'>toa</span><span class='kw'>=</span><span class='no'>toa</span>, <span class='kw'>vertex.dyn.attrs</span><span class='kw'>=</span><span class='no'>attrs</span>,
   <span class='kw'>id.and.per.vars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"id"</span>, <span class='st'>"per"</span>))

<span class='co'># Now, retrieving attributes. The 'new one' will have more (repeated)</span>
<span class='no'>attrs_new</span> <span class='kw'>&lt;-</span> <span class='fu'>diffnet.attrs</span>(<span class='no'>fs_diffnet_new</span>, <span class='kw'>as.df</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>attrs_old</span> <span class='kw'>&lt;-</span> <span class='fu'>diffnet.attrs</span>(<span class='no'>fs_diffnet</span>, <span class='kw'>as.df</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

<span class='co'># Comparing elements!</span>
<span class='no'>tocompare</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>attrs_new</span>), <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>attrs_old</span>))
<span class='fu'><a href='https://rdrr.io/r/base/all.html'>all</a></span>(<span class='no'>attrs_new</span>[,<span class='no'>tocompare</span>] <span class='kw'>==</span> <span class='no'>attrs_old</span>[,<span class='no'>tocompare</span>], <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='co'># TRUE!</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># diffnetLapply -------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>medInnovationsDiffNet</span>)
<span class='fu'>diffnetLapply</span>(<span class='no'>medInnovationsDiffNet</span>, <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>cumadopt</span>, <span class='no'>...</span>) {<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>cumadopt</span>)})</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 11
#&gt; 
#&gt; [[2]]
#&gt; [1] 20
#&gt; 
#&gt; [[3]]
#&gt; [1] 29
#&gt; 
#&gt; [[4]]
#&gt; [1] 40
#&gt; 
#&gt; [[5]]
#&gt; [1] 51
#&gt; 
#&gt; [[6]]
#&gt; [1] 62
#&gt; 
#&gt; [[7]]
#&gt; [1] 75
#&gt; 
#&gt; [[8]]
#&gt; [1] 82
#&gt; 
#&gt; [[9]]
#&gt; [1] 86
#&gt; 
#&gt; [[10]]
#&gt; [1] 87
#&gt; 
#&gt; [[11]]
#&gt; [1] 92
#&gt; 
#&gt; [[12]]
#&gt; [1] 95
#&gt; 
#&gt; [[13]]
#&gt; [1] 98
#&gt; 
#&gt; [[14]]
#&gt; [1] 102
#&gt; 
#&gt; [[15]]
#&gt; [1] 106
#&gt; 
#&gt; [[16]]
#&gt; [1] 108
#&gt; 
#&gt; [[17]]
#&gt; [1] 109
#&gt; 
#&gt; [[18]]
#&gt; [1] 125
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#auxiliary-functions">Auxiliary functions</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>George G. Vega Yon</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by George Vega Yon, Thomas Valente.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


